{
  "hash": "15968a3ead0c556b3954b9b2ef719208",
  "result": {
    "markdown": "---\ntitle: \"Getting Started with R using a real dataset\"\nauthor: \"Donnovan Young II\"\ndate: \"2024-12-02\"\ncategories: [Data Analysis]\n---\n\n\nThe first thing needed is to load in some of the packages that are going to be needed. Then we need to load into the dataset by using the read.csv command.\n\nIts important to know what the variables are in the dataset so the names function allows you to see each one.\n\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n```\n [1] \"State\"                       \"OwnComputer\"                \n [3] \"CommutePublicTransport\"      \"TotalPopulation\"            \n [5] \"MedianAge\"                   \"WithCashAssistanceIncome\"   \n [7] \"MeanSocialSecurityIcnome\"    \"SupplementarySecurityIncome\"\n [9] \"WhiteOnly\"                   \"Latinos\"                    \n[11] \"Asians\"                      \"AfricanAmerican\"            \n[13] \"Income100K.150K\"             \"Income75K.100K\"             \n[15] \"Income50K.75K\"               \"Income35K.50K\"              \n[17] \"Income25K.35K\"               \"PovertyRate\"                \n```\n:::\n:::\n\n\nIn this short example, I wanted to use a Random Forest model to help determine what the variable of most importance is to predict the Total population.\n\nFirst we split the data set into two sections, training and test. In this example we only use the training data set.\n\nNow it is time to run the random forest model, as seen below the target is \"total population\" and we are using all of the variables within the data set.\n\nOnce the model is ran, we want to strip out the feature of importance from the random forest model.\n\nMore useful variables achieve higher increases in node purities, In this case the highest number in importance is the CommutePublicTransport variable\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndf <- mydata\n\n# Set the seed for reproducibility\nset.seed(123)\n\n# Split the data into training and testing sets\ntrainIndex <- createDataPartition(df$TotalPopulation, p = 0.8, list = FALSE)\ntrain_data <- df[trainIndex, ]\ntest_data <- df[-trainIndex, ]\n\n# Train a random forest model\nrf_model <- randomForest(TotalPopulation ~ ., data = train_data)\n\n# Extract feature importance\nimportance <- importance(rf_model)\n\n# Print feature importance\nprint(importance)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n                            IncNodePurity\nState                        7.148731e+13\nOwnComputer                  7.034472e+13\nCommutePublicTransport       7.001044e+14\nMedianAge                    1.035105e+14\nWithCashAssistanceIncome     1.069582e+14\nMeanSocialSecurityIcnome     7.206757e+13\nSupplementarySecurityIncome  6.967479e+13\nWhiteOnly                    1.767187e+14\nLatinos                      1.188293e+14\nAsians                       2.111893e+14\nAfricanAmerican              9.272705e+13\nIncome100K.150K              4.380902e+13\nIncome75K.100K               1.016980e+14\nIncome50K.75K                6.307235e+13\nIncome35K.50K                2.658070e+13\nIncome25K.35K                3.930590e+13\nPovertyRate                  1.035979e+14\n```\n:::\n\n```{.r .cell-code}\n# Visualize feature importance\nvarImpPlot(rf_model)\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-2-1.png){width=672}\n:::\n:::\n\n\nI was very curious to see what the correlation between the lowest and the highest values in the IncNodePurity\n\nI created a scatter plot and ran the correlation amount for both Commute Public Transport and Income 35K.50K to show the relationship to Total Population.\n\nYou can clearly see that Commute Public Transport had the higher correlation to Total Population!\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(mydata, aes(x = TotalPopulation, y = CommutePublicTransport)) +\n  geom_point() +\n  geom_smooth(method = \"lm\", se = FALSE, color = \"red\") +\n  labs(title = \"Scatter Plot with Regression Line\",\n       x = \"Total Population\",\n       y = \"Commute Public Transport\") +\n  theme_minimal()\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n`geom_smooth()` using formula = 'y ~ x'\n```\n:::\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-3-1.png){width=672}\n:::\n\n```{.r .cell-code}\nggplot(mydata, aes(x = TotalPopulation, y = Income35K.50K)) +\n  geom_point() +\n  geom_smooth(method = \"lm\", se = FALSE, color = \"green\") +\n  labs(title = \"Scatter Plot with Regression Line\",\n       x = \"Total Population\",\n       y = \"Income35K.50K\") +\n  theme_minimal()\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n`geom_smooth()` using formula = 'y ~ x'\n```\n:::\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-3-2.png){width=672}\n:::\n\n```{.r .cell-code}\ncorrelation1 <- cor(mydata$TotalPopulation, mydata$Income35K.50K)\n\ncorrelation2 <- cor(mydata$TotalPopulation, mydata$CommutePublicTransport)\n\ncat(\" Total Population and Income35K.50K\", correlation1, \"\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n Total Population and Income35K.50K -0.1008377 \n```\n:::\n\n```{.r .cell-code}\ncat(\" Total Population and CommutePublicTransport\", correlation2)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n Total Population and CommutePublicTransport 0.5606753\n```\n:::\n:::\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}